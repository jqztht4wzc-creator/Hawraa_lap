<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ø±ÙƒÙ† Ø§Ù„ØµÙŠØ¯Ù„Ø§Ù†ÙŠØ© Ø­ÙˆØ±Ø§Ø¡</title>
    <style>
        :root {
            --bg-color: #f8f7ff;
            --card-bg: #ffffff;
            --text-main: #4a4a4a;
            --header-grad: linear-gradient(135deg, #9b59b6, #e5989b);
            --luxury-lavender: #9b59b6;
            --rose-gold: #e5989b;
            --soft-purple: #f3e5f5;
            --nav-bg: rgba(255, 255, 255, 0.95);
        }

        [data-theme="dark"] {
            --bg-color: #1a1a2e;
            --card-bg: #16213e;
            --text-main: #e0e0e0;
            --header-grad: linear-gradient(135deg, #6c3483, #210b2c);
            --luxury-lavender: #bb86fc;
            --rose-gold: #ff79c6;
            --soft-purple: #2d1b4d;
            --nav-bg: rgba(22, 33, 62, 0.98);
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: var(--bg-color);
            margin: 0;
            display: flex;
            flex-direction: column;
            height: 100vh;
            transition: 0.4s;
            color: var(--text-main);
        }

        header {
            background: var(--header-grad);
            color: white;
            padding: 30px 20px;
            text-align: center;
            border-radius: 0 0 40px 40px;
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.1);
            position: relative;
        }

        .theme-toggle {
            position: absolute; top: 20px; left: 20px;
            background: rgba(255, 255, 255, 0.2);
            border: none; color: white; border-radius: 50%;
            cursor: pointer; width: 40px; height: 40px;
            display: flex; align-items: center; justify-content: center;
        }

        .main-container { flex: 1; overflow-y: auto; padding: 20px; padding-bottom: 110px; }

        .app-section { display: none; animation: fadeIn 0.4s ease; }
        .app-section.active { display: block; }
        @keyframes fadeIn { from { opacity: 0; transform: scale(0.98); } to { opacity: 1; transform: scale(1); } }

        .card {
            background: var(--card-bg); border-radius: 30px;
            padding: 25px; box-shadow: 0 10px 30px rgba(0,0,0,0.08);
            margin-bottom: 25px; text-align: center; transition: 0.4s;
        }

        .circle-ui {
            width: 150px; height: 150px; border-radius: 50%;
            margin: 20px auto; display: flex; align-items: center; justify-content: center;
            font-size: 2.2rem; font-weight: bold; border: 3px solid var(--soft-purple);
            background: var(--card-bg); color: var(--luxury-lavender);
        }

        button.action-btn {
            width: 100%; padding: 15px; border-radius: 18px; border: none;
            font-weight: 600; cursor: pointer; transition: 0.3s;
        }
        .btn-lav { background: var(--luxury-lavender); color: white; }
        .btn-rose { background: var(--rose-gold); color: white; }
        .btn-out { background: transparent; color: #888; border: 1px solid #ddd; margin-top: 10px; }

        input {
            width: 100%; padding: 15px; border-radius: 15px;
            border: 1px solid #ddd; background: var(--card-bg);
            color: var(--text-main); box-sizing: border-box; outline: none;
        }

        #t-list { list-style: none; padding: 0; margin-top: 20px; text-align: right; }
        
        .task-item {
            background: var(--card-bg);
            padding: 15px;
            margin-bottom: 12px;
            border-radius: 18px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            box-shadow: 0 4px 12px rgba(0,0,0,0.04);
            border-right: 6px solid var(--luxury-lavender);
            transition: 0.3s;
            cursor: pointer;
        }

        .task-item.completed {
            border-right-color: #bdc3c7;
            opacity: 0.6;
        }

        .task-item.completed span {
            text-decoration: line-through;
        }

        .delete-task {
            background: #ff7675;
            color: white;
            border: none;
            padding: 8px 12px;
            border-radius: 10px;
            cursor: pointer;
            font-size: 0.8rem;
        }

        nav {
            position: fixed; bottom: 15px; left: 15px; right: 15px;
            background: var(--nav-bg); backdrop-filter: blur(10px);
            display: flex; justify-content: space-around;
            padding: 12px 0; border-radius: 25px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
        }
        .nav-btn {
            background: none; border: none; color: #888;
            font-size: 0.7rem; display: flex; flex-direction: column;
            align-items: center; cursor: pointer;
        }
        .nav-btn.active { color: var(--luxury-lavender); font-weight: bold; }
    </style>
</head>
<body data-theme="light">

<header>
    <button class="theme-toggle" onclick="toggleTheme()" id="theme-icon">ğŸŒ™</button>
    <h2 id="view-title">Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ù…Ù‡Ø§Ù…</h2>
    <p style="margin: 5px 0 0; opacity: 0.9; font-size: 0.9rem;">Ø£Ù‡Ù„Ø§Ù‹ Ø¨ÙƒÙ ÙŠØ§ ØµÙŠØ¯Ù„Ø§Ù†ÙŠØ© Ø­ÙˆØ±Ø§Ø¡ âœ¨</p>
</header>

<div class="main-container">
    <div id="v-timer" class="app-section">
        <div class="card">
            <h3>â³ ÙˆÙ‚Øª Ø§Ù„Ø¯Ø±Ø§Ø³Ø© Ø§Ù„ØµÙŠØ¯Ù„Ø§Ù†ÙŠØ©</h3>
            <div class="circle-ui" id="timer-display">25:00</div>
            <button class="action-btn btn-lav" onclick="startT()" id="t-btn">Ø§Ø¨Ø¯Ø£ Ø§Ù„Ø¬Ù„Ø³Ø©</button>
            <button class="action-btn btn-out" onclick="resetT()">Ø¥Ø¹Ø§Ø¯Ø© Ø¶Ø¨Ø·</button>
        </div>
    </div>

    <div id="v-pray" class="app-section">
        <div class="card">
            <h3>ğŸ“¿ ØªØ³Ø¨ÙŠØ­ ÙˆØ°ÙƒØ±</h3>
            <div class="circle-ui" id="p-count" style="color: var(--rose-gold);">0</div>
            <button class="action-btn btn-rose" onclick="addP()">Ø§Ø¶ØºØ· Ù„Ù„ØªØ³Ø¨ÙŠØ­</button>
            <button class="action-btn btn-out" onclick="resetP()">ØªØµÙÙŠØ±</button>
        </div>
    </div>

    <div id="v-tasks" class="app-section active">
        <div class="card">
            <h3>ğŸ“ Ø¬Ø¯ÙˆÙ„ Ø¥Ù†Ø¬Ø§Ø²Ø§ØªÙƒÙ Ø§Ù„ÙŠÙˆÙ…</h3>
            <div style="display: flex; gap: 8px;">
                <input type="text" id="t-in" placeholder="Ù…Ø§ Ù‡ÙŠ Ù…Ù‡Ø§Ù…ÙƒÙ ÙŠØ§ Ø­ÙˆØ±Ø§Ø¡ØŸ">
                <button class="action-btn btn-lav" style="width: 60px;" onclick="addT()">+</button>
            </div>
            <ul id="t-list"></ul>
        </div>
    </div>

    <div id="v-health" class="app-section">
        <div class="card">
            <h3>ğŸ“… ØªØªØ¨Ø¹ Ø§Ù„Ø¯ÙˆØ±Ø© Ø§Ù„ØµØ­ÙŠØ©</h3>
            <input type="date" id="c-date">
            <button class="action-btn btn-rose" onclick="calcC()">Ø­Ø³Ø§Ø¨ Ø§Ù„Ù…ÙˆØ¹Ø¯ Ø§Ù„Ù‚Ø§Ø¯Ù…</button>
            <div id="c-res" style="margin-top: 20px; font-weight: bold;"></div>
        </div>
    </div>
</div>

<nav>
    <button class="nav-btn" onclick="nav('v-timer', 'Ù…Ø¤Ù‚Øª Ø§Ù„ØªØ±ÙƒÙŠØ²', this)"><span>âŒ›</span>Ø¨ÙˆÙ…ÙˆØ¯ÙˆØ±Ùˆ</button>
    <button class="nav-btn" onclick="nav('v-pray', 'Ø§Ù„Ù…Ø³Ø¨Ø­Ø© Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠØ©', this)"><span>ğŸ“¿</span>Ù…Ø³Ø¨Ø­Ø©</button>
    <button class="nav-btn active" onclick="nav('v-tasks', 'Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ù…Ù‡Ø§Ù…', this)"><span>âœ¨</span>Ù…Ù‡Ø§Ù…</button>
    <button class="nav-btn" onclick="nav('v-health', 'ØªØªØ¨Ø¹ Ø§Ù„ØµØ­Ø©', this)"><span>ğŸŒ¸</span>ØµØ­ØªÙŠ</button>
</nav>

<script>
    function toggleTheme() {
        const body = document.body;
        const icon = document.getElementById('theme-icon');
        const theme = body.getAttribute('data-theme') === 'light' ? 'dark' : 'light';
        body.setAttribute('data-theme', theme);
        icon.innerText = theme === 'light' ? "ğŸŒ™" : "â˜€ï¸";
    }

    function nav(id, title, btn) {
        document.querySelectorAll('.app-section').forEach(s => s.classList.remove('active'));
        document.getElementById(id).classList.add('active');
        document.getElementById('view-title').innerText = title;
        document.querySelectorAll('.nav-btn').forEach(b => b.classList.remove('active'));
        btn.classList.add('active');
    }

    let tasks = JSON.parse(localStorage.getItem('pharma_tasks_hawra')) || [];

    function addT() {
        const input = document.getElementById('t-in');
        if (!input.value) return;
        tasks.push({ text: input.value, done: false });
        input.value = "";
        saveAndRender();
    }

    function toggleTask(index) {
        tasks[index].done = !tasks[index].done;
        saveAndRender();
    }

    function deleteTask(event, index) {
        event.stopPropagation();
        tasks.splice(index, 1);
        saveAndRender();
    }

    function saveAndRender() {
        localStorage.setItem('pharma_tasks_hawra', JSON.stringify(tasks));
        const list = document.getElementById('t-list');
        list.innerHTML = tasks.map((t, i) => `
            <li class="task-item ${t.done ? 'completed' : ''}" onclick="toggleTask(${i})">
                <span>${t.text}</span>
                <button class="delete-task" onclick="deleteTask(event, ${i})">Ø­Ø°Ù</button>
            </li>
        `).join('');
    }

    let timer; let timeLeft = 25*60; let running = false;
    function startT() {
        if(running) { clearInterval(timer); document.getElementById('t-btn').innerText = "Ø§Ø³ØªÙ…Ø±Ø§Ø±"; }
        else {
            timer = setInterval(() => {
                if(timeLeft <= 0) { clearInterval(timer); alert("Ø§Ù†ØªÙ‡Ù‰ ÙˆÙ‚Øª Ø§Ù„ØªØ±ÙƒÙŠØ² ÙŠØ§ Ø­ÙˆØ±Ø§Ø¡!"); resetT(); return; }
                timeLeft--; 
                let m = Math.floor(timeLeft/60); let s = timeLeft%60;
                document.getElementById('timer-display').innerText = `${m}:${s<10?'0'+s:s}`;
            }, 1000);
            document.getElementById('t-btn').innerText = "ØªÙˆÙ‚Ù";
        }
        running = !running;
    }
    function resetT() { clearInterval(timer); timeLeft = 25*60; running = false; document.getElementById('timer-display').innerText="25:00"; document.getElementById('t-btn').innerText="Ø§Ø¨Ø¯Ø£ Ø§Ù„Ø¬Ù„Ø³Ø©"; }

    let pc = 0;
    function addP() { pc++; document.getElementById('p-count').innerText = pc; }
    function resetP() { pc = 0; document.getElementById('p-count').innerText = 0; }

    function calcC() {
        let d = new Date(document.getElementById('c-date').value);
        if(isNaN(d)) return;
        d.setDate(d.getDate() + 28);
        document.getElementById('c-res').innerText = "Ø§Ù„Ù…ÙˆØ¹Ø¯ Ø§Ù„Ù‚Ø§Ø¯Ù… Ø§Ù„Ù…ØªÙˆÙ‚Ø¹: " + d.toLocaleDateString('ar-EG');
    }

    saveAndRender();
</script>
</body>
</html>
